
services: 
  redis: 
    image: redis:6.2
    container_name: cinema-redis
    ports:
      - '6379:6379'
    command: redis-server --requirepass ${REDIS_PASS}
    volumes: 
      - 'redis_data:/data'
  users:
    image: postgres:16
    container_name: cinema-users-database
    environment: 
      POSTGRES_USER: ${POSTGRES_NAME}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${USERS_DATABASE_NAME}
    ports: 
      - '5432:5432'
    volumes: 
      - pg_users_data:/var/lib/postgresql/data
  accounts:
    image: postgres:16
    container_name: cinema-accounts-database
    environment: 
      POSTGRES_USER: ${POSTGRES_NAME}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${ACCOUNTS_DATABASE_NAME}
    ports: 
      - '5433:5432'
    volumes: 
      - pg_accounts_data:/var/lib/postgresql/data
  actors:
    image: postgres:16
    container_name: cinema-actors-database
    environment: 
      POSTGRES_USER: ${POSTGRES_NAME}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${ACTORS_DATABASE_NAME}
    ports: 
      - '5434:5432'
    volumes: 
      - pg_accounts_data:/var/lib/postgresql/data
  movies:
    image: postgres:16
    container_name: cinema-movies-database
    environment: 
      POSTGRES_USER: ${POSTGRES_NAME}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${MOVIES_DATABASE_NAME}
    ports: 
      - '5435:5432'
    volumes: 
      - pg_movies_data:/var/lib/postgresql/data
  genres:
    image: postgres:16
    container_name: cinema-genres-database
    environment: 
      POSTGRES_USER: ${POSTGRES_NAME}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${GENRES_DATABASE_NAME}
    ports: 
      - '5436:5432'
    volumes: 
      - pg_genres_data:/var/lib/postgresql/data
  ratings:
    image: postgres:16
    container_name: cinema-ratings-database
    environment: 
      POSTGRES_USER: ${POSTGRES_NAME}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${RATINGS_DATABASE_NAME}
    ports: 
      - '5437:5432'
    volumes: 
      - pg_ratings_data:/var/lib/postgresql/data

volumes:
  redis_data:
  pg_users_data:
  pg_accounts_data:
  pg_actors_data:
  pg_movies_data:
  pg_genres_data:
  pg_ratings_data: